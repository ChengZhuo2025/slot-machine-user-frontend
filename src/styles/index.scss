// 全局样式入口文件
@import './variables.scss';
@import './mixins.scss';
@import './normalize.scss';

// MiSans字体声明
@font-face {
  font-family: 'MiSans';
  src: url('@/static/fonts/MiSans-Light.woff2') format('woff2'),
       url('@/static/fonts/MiSans-Light.woff') format('woff');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MiSans';
  src: url('@/static/fonts/MiSans-Regular.woff2') format('woff2'),
       url('@/static/fonts/MiSans-Regular.woff') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MiSans';
  src: url('@/static/fonts/MiSans-Medium.woff2') format('woff2'),
       url('@/static/fonts/MiSans-Medium.woff') format('woff');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MiSans';
  src: url('@/static/fonts/MiSans-Semibold.woff2') format('woff2'),
       url('@/static/fonts/MiSans-Semibold.woff') format('woff');
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MiSans';
  src: url('@/static/fonts/MiSans-Bold.woff2') format('woff2'),
       url('@/static/fonts/MiSans-Bold.woff') format('woff');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MiSans';
  src: url('@/static/fonts/MiSans-Heavy.woff2') format('woff2'),
       url('@/static/fonts/MiSans-Heavy.woff') format('woff');
  font-weight: 900;
  font-style: normal;
  font-display: swap;
}

// 全局字体设置
* {
  font-family: 'MiSans', -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;
}

// Animate.css 动画库
@import 'animate.css';

// 自定义动画扩展
.animate__fadeInUp {
  animation-duration: 0.5s;
}

.animate__fadeInDown {
  animation-duration: 0.5s;
}

.animate__slideInRight {
  animation-duration: 0.3s;
}

.animate__slideOutLeft {
  animation-duration: 0.3s;
}

// 页面过渡动画
.page-enter-active,
.page-leave-active {
  transition: all 0.3s ease;
}

.page-enter-from {
  opacity: 0;
  transform: translateX(100%);
}

.page-leave-to {
  opacity: 0;
  transform: translateX(-100%);
}

// 组件通用样式
.btn {
  @include button-base();
  
  &--primary {
    @include button-primary();
  }
  
  &--secondary {
    @include button-secondary();
  }
  
  &--small {
    padding: $spacing-xs $spacing-sm;
    font-size: $font-size-sm;
  }
  
  &--large {
    padding: $spacing-base $spacing-lg;
    font-size: $font-size-lg;
  }
  
  &--block {
    width: 100%;
    display: flex;
  }
  
  &--round {
    border-radius: $border-radius-full;
  }
}

.card {
  @include card();
  
  &__header {
    padding: $spacing-base;
    border-bottom: 1rpx solid $border-light;
  }
  
  &__body {
    padding: $spacing-base;
  }
  
  &__footer {
    padding: $spacing-base;
    border-top: 1rpx solid $border-light;
  }
}

.input {
  @include input-base();
  
  &--large {
    padding: $spacing-base $spacing-lg;
    font-size: $font-size-lg;
  }
  
  &--small {
    padding: $spacing-xs $spacing-sm;
    font-size: $font-size-sm;
  }
  
  &--round {
    border-radius: $border-radius-full;
  }
}

// 列表样式
.list {
  background-color: $background-primary;
  
  &__item {
    padding: $spacing-base;
    border-bottom: 1rpx solid $border-light;
    @include flex-between();
    
    &:last-child {
      border-bottom: none;
    }
    
    &--clickable {
      @include transition();
      
      &:active {
        background-color: $background-tertiary;
      }
    }
  }
  
  &__label {
    font-size: $font-size-base;
    color: $text-primary;
  }
  
  &__value {
    font-size: $font-size-base;
    color: $text-secondary;
  }
  
  &__arrow {
    width: 16rpx;
    height: 16rpx;
    border-top: 2rpx solid $text-tertiary;
    border-right: 2rpx solid $text-tertiary;
    transform: rotate(45deg);
    margin-left: $spacing-sm;
  }
}

// 导航栏样式
.navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: $z-index-fixed;
  background-color: $background-primary;
  @include shadow(sm);
  
  &__content {
    height: 88rpx;
    @include flex-between();
    padding: 0 $spacing-base;
  }
  
  &__back {
    width: 44rpx;
    height: 44rpx;
    @include flex-center();
  }
  
  &__title {
    font-size: $font-size-lg;
    font-weight: $font-weight-medium;
    color: $text-primary;
  }
  
  &__action {
    width: 44rpx;
    height: 44rpx;
    @include flex-center();
  }
}

// 底部导航样式
.tabbar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: $z-index-fixed;
  background-color: $background-primary;
  @include shadow(lg);
  
  &__content {
    height: 120rpx;
    @include flex();
    padding-bottom: constant(safe-area-inset-bottom);
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  &__item {
    flex: 1;
    @include flex-center();
    flex-direction: column;
    padding: $spacing-xs 0;
    @include transition();
    
    &--active {
      color: $primary-color;
    }
    
    &:active {
      transform: scale(0.95);
    }
  }
  
  &__icon {
    font-size: 48rpx;
    margin-bottom: 4rpx;
    
    &--scan {
      font-size: 64rpx;
      color: $primary-color;
    }
  }
  
  &__label {
    font-size: $font-size-xs;
    color: $text-secondary;
    
    .tabbar__item--active & {
      color: $primary-color;
    }
  }
}

// 加载状态
.loading {
  @include flex-center();
  padding: $spacing-xl;
  
  &__spinner {
    width: 40rpx;
    height: 40rpx;
    border: 4rpx solid $border-light;
    border-top-color: $primary-color;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  
  &__text {
    margin-top: $spacing-sm;
    font-size: $font-size-sm;
    color: $text-secondary;
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

// 空状态
.empty {
  @include flex-center();
  flex-direction: column;
  padding: $spacing-2xl;
  
  &__image {
    width: 200rpx;
    height: 200rpx;
    margin-bottom: $spacing-lg;
    opacity: 0.5;
  }
  
  &__text {
    font-size: $font-size-base;
    color: $text-tertiary;
  }
}

// 分割线
.divider {
  height: 1rpx;
  background-color: $divider-color;
  margin: $spacing-base 0;
  
  &--thick {
    height: 16rpx;
    background-color: $background-tertiary;
    margin: 0;
  }
}